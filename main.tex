\documentclass[draft,msc]{ubcthesis}
\usepackage[usenames]{color}
\usepackage{savesym}
\usepackage{amsmath}
\usepackage{amsthm}
\savesymbol{program}
\savesymbol{@program}
\usepackage{semantic}   % Tools for typesetting PL semantics
\usepackage{braket}     % Easy angle-bracket notation
\restoresymbol{}{program}
\restoresymbol{}{@program}
\usepackage{syntax}
\usepackage{mathpartir}
\usepackage{xspace}
\usepackage{dblfloatfix}
\usepackage{multicol}
\usepackage{subcaption}
\usepackage{tikz}
\usepackage{stmaryrd}
\usepackage{changepage}
\usepackage{multirow}
\usepackage{mathtools}

% Always Use these
\usepackage{hyperref}
\usepackage{microtype}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}

\newcommand{\shrug}[1][]{%
\begin{tikzpicture}[baseline,x=0.8\ht\strutbox,y=0.8\ht\strutbox,line width=0.125ex,#1]
\def\arm{(-2.5,0.95) to (-2,0.95) (-1.9,1) to (-1.5,0) (-1.35,0) to (-0.8,0)};
\draw \arm;
\draw[xscale=-1] \arm;
\def\headpart{(0.6,0) arc[start angle=-40, end angle=40,x radius=0.6,y radius=0.8]};
\draw \headpart;
\draw[xscale=-1] \headpart;
\def\eye{(-0.075,0.15) .. controls (0.02,0) .. (0.075,-0.15)};
\draw[shift={(-0.3,0.8)}] \eye;
\draw[shift={(0,0.85)}] \eye;
% draw mouth
\draw (-0.1,0.2) to [out=15,in=-100] (0.4,0.95); 
\end{tikzpicture}}
\newcommand{\thought}[1]{\textcolor{red}{\textit{(Thought: #1 \shrug)}}}
\newcommand{\todo}[1]{\textcolor{red}{\textit{(TODO: #1)}}}
\newcommand{\feedback}[2]{#2}

\newcommand{\prechk}[0]{$prechk$\xspace}
\newcommand{\name}[0]{Wasm-prechk\xspace}
\newcommand{\wasm}[0]{Wasm\xspace}
\newcommand{\dtal}[0]{DTAL\xspace}
\newcommand{\ie}[0]{\emph{i.e.,}\xspace}
\newcommand{\eg}[0]{\emph{e.g.,}\xspace}

\newcommand{\erase}[1]{\llbracket #1 \rrbracket}

\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[section]{Lemma}
%\Crefname{lemma}{Lemma}{Lemmas}

% Stack formatting
\newenvironment{stackTL}{
    \setlength{\arraycolsep}{0pt}
    \begin{array}[t]{l}\ignorespacesafterend
} {
    \end{array}\ignorespacesafterend
}

% Some custom notations for object language stuff
% Typeset object language notation in blue with sans serif font
\newcommand{\tbbf}[1]{\textbf{\color{blue}#1}}
\reservestyle{\keywords}{\tbbf}
\keywords{ithreetwo[i32], isixfour[i64], binop[binop], testop[testop], relop[relop], const[const\;], eq[eq\;], neq[neq\;], eqz[eqz\;], unreachable[unreachable], nop[nop], drop[drop], select[select], block[block\;], end[\;end], loop[loop\;], if[if\;], else[\;else\;], br[br\;], brif[br\rule{1ex}{.4pt}if\;], brtable[br\rule{1ex}{.4pt}table\;], return[return], call[call\;], callindirect[call\rule{1ex}{.4pt}indirect\;], getlocal[get\rule{1ex}{.4pt}local\;], setlocal[set\rule{1ex}{.4pt}local\;], teelocal[tee\rule{1ex}{.4pt}local\;], getglobal[get\rule{1ex}{.4pt}global\;], setglobal[set\rule{1ex}{.4pt}global\;], trap[trap], func[func\;], local[local], global[global\;], table[table\;], memory[memory\;], label[label], div[div], load[load\;], store[store\;], currentmemory[current\rule{1ex}{.4pt}memory\;], growmemory[grow\rule{1ex}{.4pt}memory\;], divpc[div\textsubscript{prechk}], callindirectpc[call\rule{1ex}{.4pt}indirect\textsubscript{prechk}\;], loadpc[load\textsubscript{prechk}\;], storepc[store\textsubscript{prechk}\;]}

\mathlig{;}{\tbbf{;\;}}
\mathlig{:}{:}

\hyphenation{Web-Assembly}

\newcommand{\typerule}[2]{C \vdash #1:#2}
%% stack ; locals ; globals ; index context
\newcommand{\ti}[2]{(#1\;#2)}
\newcommand{\type}[4]{#1;#2;#3;#4}
\newcommand{\insttype}[2]{#1 \rightarrow #2}

\includeonly{
    Preamble/acknowledgements,
    Preamble/dedication,
    Preamble/abstract,
    Chapters/introduction,
    Chapters/background,
    Chapters/wasm-prechk,
    Chapters/type-safety,
    Chapters/discussion,
    Chapters/conclusion,
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\author{Adam T. Geller}
\title{An Indexed Type System for Faster and Safer WebAssembly}
%% \subtitle{With a Subtitle}

\institution{The University Of British Columbia}
\faculty{The Faculty of Graduate Studies}
\institutionaddress{Vancouver}
\program{Computer Science}
\department{Computer Science}

%%\previousdegree{AAS-DTA (With High Distinction), Bellevue College, 2016}
%%\previousdegree{B.Sc., The University of Washington, 2018}

\copyrightyear{2020}
\submitdate{\monthname\ \number\year} % The "\ " is required after
                                      % \monthname to prevent the
                                      % command from eating the space.
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{document}
\frontmatter

\maketitle

\include{Preamble/abstract}

\maketitle

\include{Preamble/acknowledgements}

\include{Preamble/dedication}

\tableofcontents                %% Mandatory
\listoftables                   %% Mandatory if thesis has tables
\listoffigures                  %% Mandatory if thesis has figures

\mainmatter

\include{Chapters/introduction}
\include{Chapters/background}
\include{Chapters/wasm-prechk}
\include{Chapters/type-safety}
\include{Chapters/discussion}
\include{Chapters/conclusion}

\bibliographystyle{plain}
\bibliography{citations}

\end{document}
